<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet" href="css/common.css" />
	</head>
	<script src="js/lazy-load-img.js"></script>
	<body>
		<ul id="list">
			
		</ul>
		<script>
			(function(){
				var ul=document.getElementById("list");
				
				for(var i=0;i<21;i++){
					var li=document.createElement("li");
					li.innerHTML="<image src='img/default.png' data-src='img/"+i+".jpg'/>";
					ul.appendChild(li);
				}
				var param={
					el: document.querySelector('#list'), // 选择的元素
				      mode: 'diy', // 默认模式，将显示原图，diy模式，将自定义剪切，默认剪切居中部分
				      time: 300, // 设置一个检测时间间隔
				      done: true, // 页面内所有数据图片加载完成后，是否自己销毁程序，true默认销毁，false不销毁：FALSE应用场景：页面异步不断获取数据的情况下 需要实时监听则不销毁
				      diy: { // 此属性，只有在设置diy 模式时才生效
				        backgroundSize: 'cover',
				        backgroundRepeat: 'no-repeat',
				        backgroundPosition: 'center center'
				      },
				      position: { // 只要其中一个位置符合条件，都会触发加载机制
				        top: 0, // 元素距离顶部
				        right: 0, // 元素距离右边
				        bottom: 0, // 元素距离下面
				        left: 0 // 元素距离左边
				      },
				      before: function before(el) {// 图片加载之前，执行钩子函数
	
				      },
				      success: function success(el) {// 图片加载成功，执行钩子函数
						el.classList.add("success");
				      },
				      error: function error(el) {// 图片加载失败，执行的钩子函数
						el.src="img/error.png";
				      }
				}
				var lazyImg=new LazyLoadImg(param);
					
				
			})()
		</script>
	</body>
	
</html>
